<p>(with-inotify (inot `((,(user-homedir-pathname) ,in-create)))
  (read-events inot))</p>

<p>blocks</p>

<p>$ touch ~/file</p>

<p>&rArr;
(#S(EVENT
    :WATCH #&lt;WATCH pathname: #P&ldquo;/home/stas/&rdquo; mask: (IN-CREATE)&gt;
    :MASK (IN-CREATE)
    :COOKIE 0
    :NAME &ldquo;file&rdquo;))</p>

<p>The masks are only printed using names, the actual values are integers.</p>

<p>An easy way to check for multiple events:
(member (logior in-ignored in-delete-self in-move-self)
        events
        :key #&apos;event-mask
        :test #&apos;logtest)</p>

<p>With a timeout:</p>

<p>(with-inotify (inotify `((&ldquo;/tmp/test&rdquo; ,(logior in-modify
                                               in-close))))
  (loop for events = (read-events inotify :time-out 1)
        thereis events
        do (write-line &ldquo;timed out&rdquo;)))
timed out
timed out</p>

<p>$ echo 10 &gt;&gt; /tmp/test</p>

<p>&rArr;
(#S(INOTIFY:EVENT
    :WATCH #&lt;INOTIFY:WATCH
             pathname: #P&ldquo;/tmp/test&rdquo; mask: (IN-CLOSE-NOWRITE IN-CLOSE-WRITE
                                            IN-MODIFY)&gt;
    :MASK (INOTIFY:IN-MODIFY)
    :COOKIE 0
    :NAME NIL)
 #S(INOTIFY:EVENT
    :WATCH #&lt;INOTIFY:WATCH
             pathname: #P&ldquo;/tmp/test&rdquo; mask: (IN-CLOSE-NOWRITE IN-CLOSE-WRITE
                                            IN-MODIFY)&gt;
    :MASK (INOTIFY:IN-CLOSE-WRITE)
    :COOKIE 0
    :NAME NIL))</p>
