<h1>cl-apple-plist</h1>

<p>Encodes Common Lisp data structures in Apple property list XML format (.plist).</p>

<p>Released under a BSD style license.</p>

<h2>Introduction</h2>

<p>When building Apple IOS applications, it&apos;s convenient to use .plist files to store reference data.</p>

<p><a href="http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/AboutPropertyLists/AboutPropertyLists.html" >About Property Lists</a> </p>

<p>Rather than maintain plist files by hand or using Xcode, I&apos;ve found it useful to create Lisp
data structures as s-expressions and then use this library to export to .plist files.</p>

<h2>Notes</h2>

<p>Lists are encoded as array tags, number as integer or real and t and nil map to true and false respectively.</p>

<pre><code>CL-USER&gt; (encode-apple-plist (list &quot;hello&quot; &quot;world&quot; 1 2.89 t nil))
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;
&lt;plist version=&quot;1.0&quot;&gt;
&lt;array&gt;
&lt;string&gt;hello&lt;/string&gt;
&lt;string&gt;world&lt;/string&gt;
&lt;integer&gt;1&lt;/integer&gt;
&lt;real&gt;2.89&lt;/real&gt;
&lt;true/&gt;
&lt;false/&gt;
&lt;/array&gt;
&lt;/plist&gt;
NIL
</code></pre>

<p>Hash tables become dict tags.</p>

<pre><code> CL-USER&gt; (let ((h (make-hash-table))) (setf (gethash 1 h) &quot;one&quot;) (encode-apple-plist h))
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
 &lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;
 &lt;plist version=&quot;1.0&quot;&gt;
 &lt;dict&gt;
 &lt;key&gt;1&lt;/key&gt;&lt;string&gt;one&lt;/string&gt;
 &lt;/dict&gt;
 &lt;/plist&gt;
 NIL
</code></pre>

<p>encode-apple-plist takes an optional stream argument, but encode-apple-plist-to-file(data filename) is a convenenience function that writes the plist
to a file.</p>

<pre><code>CL-USER&gt; (encode-apple-plist-to-file ((list &quot;1&quot; &quot;2&quot;) &quot;myfile.plist&quot;))
</code></pre>

<p>Strings are HTML-encoded using the html-encode library.</p>

<p>There is currently no support for date tags, partly because Lisp dates are stored as integers rather than arecognizable date type. Ideas welcome.</p>

<p>There is currently no support for data tags. Ideas welcome.</p>

<p>Should BITs be mapped to true and false or 0 and 1?</p>

<p>Rob Blackwell</p>

<p>October 2011 </p>
